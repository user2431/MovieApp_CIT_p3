{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ivans\\\\Desktop\\\\Roskilde\\\\7th sem\\\\Complex IT systems\\\\exam\\\\3rd-main\\\\src\\\\components\\\\UserProfile.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst fetchUserData = async () => {\n  try {\n    const response = await axios.get(`http://localhost:5000/api/postgres/user_info`);\n    return Array.isArray(response.data) && response.data.length > 0 ? response.data[0] : response.data;\n  } catch (error) {\n    console.error(\"Error fetching user data:\", error);\n    alert(\"Unable to load user details. Please try again.\");\n    return null;\n  }\n};\nconst UserProfile = ({\n  isPopupVisible,\n  togglePopup,\n  isLoading,\n  UserData,\n  searchHistory,\n  UserRating,\n  passwordUpdateError,\n  newPassword,\n  confirmPassword,\n  handlePasswordChange,\n  setNewPassword,\n  setConfirmPassword,\n  popupRef,\n  isClosing\n}) => {\n  _s();\n  const [isPasswordChangeVisible, setIsPasswordChangeVisible] = useState(false);\n  const togglePasswordChangeVisibility = () => {\n    setIsPasswordChangeVisible(!isPasswordChangeVisible);\n  };\n  if (!isPopupVisible) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `user-profile-popup ${isClosing ? \"closing\" : \"\"}`,\n    ref: popupRef,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"user-profile-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"close-button\",\n        onClick: togglePopup,\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"User Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Username:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 17\n            }, this), \" \", (UserData === null || UserData === void 0 ? void 0 : UserData.username) || \"N/A\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, this), \" \", (UserData === null || UserData === void 0 ? void 0 : UserData.email) || \"N/A\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Search History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: searchHistory.length > 0 ? searchHistory.map((item, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: item.search_term\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 21\n            }, this)) : /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"No search history available\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"User Ratings\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: UserRating.length > 0 ? UserRating.map((rating, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [rating.movie_name, \": \", rating.rating]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 21\n            }, this)) : /*#__PURE__*/_jsxDEV(\"li\", {\n              children: \"No ratings available\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Password Change\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: togglePasswordChangeVisibility,\n            children: isPasswordChangeVisible ? \"Hide Password Change\" : \"Change Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), isPasswordChangeVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              placeholder: \"New Password\",\n              value: newPassword,\n              onChange: e => setNewPassword(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              placeholder: \"Confirm Password\",\n              value: confirmPassword,\n              onChange: e => setConfirmPassword(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 19\n            }, this), passwordUpdateError && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"error\",\n              children: passwordUpdateError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 43\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handlePasswordChange,\n              children: \"Update Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n};\n_s(UserProfile, \"XpQdALGIxrYiGlh1sFNsVUqFScE=\");\n_c = UserProfile;\nexport default UserProfile;\nvar _c;\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","fetchUserData","response","get","Array","isArray","data","length","error","console","alert","UserProfile","isPopupVisible","togglePopup","isLoading","UserData","searchHistory","UserRating","passwordUpdateError","newPassword","confirmPassword","handlePasswordChange","setNewPassword","setConfirmPassword","popupRef","isClosing","_s","isPasswordChangeVisible","setIsPasswordChangeVisible","togglePasswordChangeVisibility","className","ref","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","username","email","map","item","index","search_term","rating","movie_name","type","placeholder","value","onChange","e","target","_c","$RefreshReg$"],"sources":["C:/Users/ivans/Desktop/Roskilde/7th sem/Complex IT systems/exam/3rd-main/src/components/UserProfile.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nconst fetchUserData = async () => {\n  try {\n    const response = await axios.get(`http://localhost:5000/api/postgres/user_info`);\n    return Array.isArray(response.data) && response.data.length > 0 ? response.data[0] : response.data;\n  } catch (error) {\n    console.error(\"Error fetching user data:\", error);\n    alert(\"Unable to load user details. Please try again.\");\n    return null;\n  }\n};\n\nconst UserProfile = ({\n  isPopupVisible,\n  togglePopup,\n  isLoading,\n  UserData,\n  searchHistory,\n  UserRating,\n  passwordUpdateError,\n  newPassword,\n  confirmPassword,\n  handlePasswordChange,\n  setNewPassword,\n  setConfirmPassword,\n  popupRef,\n  isClosing,\n}) => {\n  const [isPasswordChangeVisible, setIsPasswordChangeVisible] = useState(false);\n\n  const togglePasswordChangeVisibility = () => {\n    setIsPasswordChangeVisible(!isPasswordChangeVisible);\n  };\n\n  if (!isPopupVisible) return null;\n\n  return (\n    <div\n      className={`user-profile-popup ${isClosing ? \"closing\" : \"\"}`}\n      ref={popupRef}\n    >\n      <div className=\"user-profile-content\">\n        <button className=\"close-button\" onClick={togglePopup}>\n          &times;\n        </button>\n        <h3>User Profile</h3>\n\n        {isLoading ? (\n          <p>Loading...</p>\n        ) : (\n          <>\n            <div>\n              <p>\n                <strong>Username:</strong> {UserData?.username || \"N/A\"}\n              </p>\n              <p>\n                <strong>Email:</strong> {UserData?.email || \"N/A\"}\n              </p>\n            </div>\n\n            <div>\n              <h4>Search History</h4>\n              <ul>\n                {searchHistory.length > 0 ? (\n                  searchHistory.map((item, index) => (\n                    <li key={index}>{item.search_term}</li>\n                  ))\n                ) : (\n                  <li>No search history available</li>\n                )}\n              </ul>\n            </div>\n\n            <div>\n              <h4>User Ratings</h4>\n              <ul>\n                {UserRating.length > 0 ? (\n                  UserRating.map((rating, index) => (\n                    <li key={index}>\n                      {rating.movie_name}: {rating.rating}\n                    </li>\n                  ))\n                ) : (\n                  <li>No ratings available</li>\n                )}\n              </ul>\n            </div>\n\n            <div>\n              <h4>Password Change</h4>\n              <button onClick={togglePasswordChangeVisibility}>\n                {isPasswordChangeVisible ? \"Hide Password Change\" : \"Change Password\"}\n              </button>\n\n              {isPasswordChangeVisible && (\n                <div>\n                  <input\n                    type=\"password\"\n                    placeholder=\"New Password\"\n                    value={newPassword}\n                    onChange={(e) => setNewPassword(e.target.value)}\n                  />\n                  <input\n                    type=\"password\"\n                    placeholder=\"Confirm Password\"\n                    value={confirmPassword}\n                    onChange={(e) => setConfirmPassword(e.target.value)}\n                  />\n                  {passwordUpdateError && <p className=\"error\">{passwordUpdateError}</p>}\n                  <button onClick={handlePasswordChange}>Update Password</button>\n                </div>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default UserProfile;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE1B,MAAMC,aAAa,GAAG,MAAAA,CAAA,KAAY;EAChC,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,GAAG,CAAC,8CAA8C,CAAC;IAChF,OAAOC,KAAK,CAACC,OAAO,CAACH,QAAQ,CAACI,IAAI,CAAC,IAAIJ,QAAQ,CAACI,IAAI,CAACC,MAAM,GAAG,CAAC,GAAGL,QAAQ,CAACI,IAAI,CAAC,CAAC,CAAC,GAAGJ,QAAQ,CAACI,IAAI;EACpG,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;IACjDE,KAAK,CAAC,gDAAgD,CAAC;IACvD,OAAO,IAAI;EACb;AACF,CAAC;AAED,MAAMC,WAAW,GAAGA,CAAC;EACnBC,cAAc;EACdC,WAAW;EACXC,SAAS;EACTC,QAAQ;EACRC,aAAa;EACbC,UAAU;EACVC,mBAAmB;EACnBC,WAAW;EACXC,eAAe;EACfC,oBAAoB;EACpBC,cAAc;EACdC,kBAAkB;EAClBC,QAAQ;EACRC;AACF,CAAC,KAAK;EAAAC,EAAA;EACJ,MAAM,CAACC,uBAAuB,EAAEC,0BAA0B,CAAC,GAAGjC,QAAQ,CAAC,KAAK,CAAC;EAE7E,MAAMkC,8BAA8B,GAAGA,CAAA,KAAM;IAC3CD,0BAA0B,CAAC,CAACD,uBAAuB,CAAC;EACtD,CAAC;EAED,IAAI,CAACf,cAAc,EAAE,OAAO,IAAI;EAEhC,oBACEd,OAAA;IACEgC,SAAS,EAAE,sBAAsBL,SAAS,GAAG,SAAS,GAAG,EAAE,EAAG;IAC9DM,GAAG,EAAEP,QAAS;IAAAQ,QAAA,eAEdlC,OAAA;MAAKgC,SAAS,EAAC,sBAAsB;MAAAE,QAAA,gBACnClC,OAAA;QAAQgC,SAAS,EAAC,cAAc;QAACG,OAAO,EAAEpB,WAAY;QAAAmB,QAAA,EAAC;MAEvD;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACTvC,OAAA;QAAAkC,QAAA,EAAI;MAAY;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAEpBvB,SAAS,gBACRhB,OAAA;QAAAkC,QAAA,EAAG;MAAU;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,gBAEjBvC,OAAA,CAAAE,SAAA;QAAAgC,QAAA,gBACElC,OAAA;UAAAkC,QAAA,gBACElC,OAAA;YAAAkC,QAAA,gBACElC,OAAA;cAAAkC,QAAA,EAAQ;YAAS;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAAC,CAAAtB,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEuB,QAAQ,KAAI,KAAK;UAAA;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtD,CAAC,eACJvC,OAAA;YAAAkC,QAAA,gBACElC,OAAA;cAAAkC,QAAA,EAAQ;YAAM;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,KAAC,EAAC,CAAAtB,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEwB,KAAK,KAAI,KAAK;UAAA;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eAENvC,OAAA;UAAAkC,QAAA,gBACElC,OAAA;YAAAkC,QAAA,EAAI;UAAc;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACvBvC,OAAA;YAAAkC,QAAA,EACGhB,aAAa,CAACT,MAAM,GAAG,CAAC,GACvBS,aAAa,CAACwB,GAAG,CAAC,CAACC,IAAI,EAAEC,KAAK,kBAC5B5C,OAAA;cAAAkC,QAAA,EAAiBS,IAAI,CAACE;YAAW,GAAxBD,KAAK;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAwB,CACvC,CAAC,gBAEFvC,OAAA;cAAAkC,QAAA,EAAI;YAA2B;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI;UACpC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC,eAENvC,OAAA;UAAAkC,QAAA,gBACElC,OAAA;YAAAkC,QAAA,EAAI;UAAY;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACrBvC,OAAA;YAAAkC,QAAA,EACGf,UAAU,CAACV,MAAM,GAAG,CAAC,GACpBU,UAAU,CAACuB,GAAG,CAAC,CAACI,MAAM,EAAEF,KAAK,kBAC3B5C,OAAA;cAAAkC,QAAA,GACGY,MAAM,CAACC,UAAU,EAAC,IAAE,EAACD,MAAM,CAACA,MAAM;YAAA,GAD5BF,KAAK;cAAAR,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEV,CACL,CAAC,gBAEFvC,OAAA;cAAAkC,QAAA,EAAI;YAAoB;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI;UAC7B;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF,CAAC,eAENvC,OAAA;UAAAkC,QAAA,gBACElC,OAAA;YAAAkC,QAAA,EAAI;UAAe;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACxBvC,OAAA;YAAQmC,OAAO,EAAEJ,8BAA+B;YAAAG,QAAA,EAC7CL,uBAAuB,GAAG,sBAAsB,GAAG;UAAiB;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/D,CAAC,EAERV,uBAAuB,iBACtB7B,OAAA;YAAAkC,QAAA,gBACElC,OAAA;cACEgD,IAAI,EAAC,UAAU;cACfC,WAAW,EAAC,cAAc;cAC1BC,KAAK,EAAE7B,WAAY;cACnB8B,QAAQ,EAAGC,CAAC,IAAK5B,cAAc,CAAC4B,CAAC,CAACC,MAAM,CAACH,KAAK;YAAE;cAAAd,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjD,CAAC,eACFvC,OAAA;cACEgD,IAAI,EAAC,UAAU;cACfC,WAAW,EAAC,kBAAkB;cAC9BC,KAAK,EAAE5B,eAAgB;cACvB6B,QAAQ,EAAGC,CAAC,IAAK3B,kBAAkB,CAAC2B,CAAC,CAACC,MAAM,CAACH,KAAK;YAAE;cAAAd,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrD,CAAC,EACDnB,mBAAmB,iBAAIpB,OAAA;cAAGgC,SAAS,EAAC,OAAO;cAAAE,QAAA,EAAEd;YAAmB;cAAAgB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACtEvC,OAAA;cAAQmC,OAAO,EAAEZ,oBAAqB;cAAAW,QAAA,EAAC;YAAe;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5D,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA,eACN,CACH;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACX,EAAA,CA1GIf,WAAW;AAAAyC,EAAA,GAAXzC,WAAW;AA4GjB,eAAeA,WAAW;AAAC,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}